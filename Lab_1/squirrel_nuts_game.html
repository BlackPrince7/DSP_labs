<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêøÔ∏è –ó–∞–≥–∞–¥–∫–∞ –æ—Ä–µ—Ö–æ–≤ –≤ –∫–∞—Ä–º–∞–Ω–∞—Ö</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #f5576c;
            margin-bottom: 10px;
        }

        .story {
            background: #fff5f7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #f5576c;
        }

        .squirrels-container {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            gap: 20px;
        }

        .squirrel {
            flex: 1;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 3px solid #dee2e6;
            transition: all 0.3s;
        }

        .squirrel.correct {
            border-color: #28a745;
            background: #d4edda;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .squirrel-icon {
            font-size: 60px;
            margin: 10px 0;
        }

        .squirrel-label {
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
        }

        .input-group {
            margin: 20px 0;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            font-size: 20px;
            border: 2px solid #f5576c;
            border-radius: 10px;
            box-sizing: border-box;
            text-align: center;
        }

        .nuts-display {
            font-size: 24px;
            margin: 15px 0;
            min-height: 40px;
        }

        button {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        button:hover {
            background: #f093fb;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .hint {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: #fff5f7;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #f5576c;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .explanation {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .celebration {
            text-align: center;
            font-size: 50px;
            margin: 20px 0;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêøÔ∏è –ó–∞–≥–∞–¥–∫–∞ –æ—Ä–µ—Ö–æ–≤ –≤ –∫–∞—Ä–º–∞–Ω–∞—Ö üêøÔ∏è</h1>

        <div class="story">
            <p><strong>–ó–∞–¥–∞—á–∞:</strong></p>
            <p>–í –¥–≤—É—Ö –∫–∞—Ä–º–∞–Ω–∞—Ö –±—ã–ª–æ <strong>28 –æ—Ä–µ—Ö–æ–≤</strong>, –ø—Ä–∏—á—ë–º –≤ –ª–µ–≤–æ–º –∫–∞—Ä–º–∞–Ω–µ –≤ <strong>3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ</strong>, —á–µ–º –≤ –ø—Ä–∞–≤–æ–º.</p>
            <p><strong>–°–∫–æ–ª—å–∫–æ –æ—Ä–µ—Ö–æ–≤ –±—ã–ª–æ –≤ –∫–∞–∂–¥–æ–º –∫–∞—Ä–º–∞–Ω–µ?</strong></p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="attempts">0</div>
                <div class="stat-label">–ü–æ–ø—ã—Ç–æ–∫</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="points">100</div>
                <div class="stat-label">–û—á–∫–æ–≤</div>
            </div>
        </div>

        <div class="squirrels-container">
            <div class="squirrel" id="rightSquirrel">
                <div class="squirrel-icon">üêøÔ∏è</div>
                <div class="squirrel-label">–ü—Ä–∞–≤—ã–π –∫–∞—Ä–º–∞–Ω</div>
                <div class="input-group">
                    <input type="number" id="rightInput" placeholder="?" min="0" max="28">
                </div>
                <div class="nuts-display" id="rightNuts"></div>
            </div>

            <div class="squirrel" id="leftSquirrel">
                <div class="squirrel-icon">üêøÔ∏è</div>
                <div class="squirrel-label">–õ–µ–≤—ã–π –∫–∞—Ä–º–∞–Ω</div>
                <div class="input-group">
                    <input type="number" id="leftInput" placeholder="?" min="0" max="28">
                </div>
                <div class="nuts-display" id="leftNuts"></div>
            </div>
        </div>

        <button onclick="checkAnswer()" id="submitBtn">üéØ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
        <button onclick="showHint()" id="hintBtn" style="background:#ffc107;">üí° –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É</button>
        <button onclick="resetGame()" id="resetBtn" style="display:none; background:#6c757d;">üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>

        <div id="result" class="result"></div>
    </div>

    <script>
        const correctRight = 7;
        const correctLeft = 21;
        let attempts = 0;
        let points = 100;
        let hintShown = false;

        function updateNutDisplay() {
            const right = parseInt(document.getElementById('rightInput').value) || 0;
            const left = parseInt(document.getElementById('leftInput').value) || 0;

            document.getElementById('rightNuts').textContent = 'üå∞'.repeat(Math.min(right, 15)) + (right > 15 ? '...' : '');
            document.getElementById('leftNuts').textContent = 'üå∞'.repeat(Math.min(left, 15)) + (left > 15 ? '...' : '');
        }

        document.getElementById('rightInput').addEventListener('input', updateNutDisplay);
        document.getElementById('leftInput').addEventListener('input', updateNutDisplay);

        function checkAnswer() {
            attempts++;
            document.getElementById('attempts').textContent = attempts;

            const rightAnswer = parseInt(document.getElementById('rightInput').value);
            const leftAnswer = parseInt(document.getElementById('leftInput').value);
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';

            if (isNaN(rightAnswer) || isNaN(leftAnswer)) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = '‚ö†Ô∏è <strong>–û—à–∏–±–∫–∞!</strong> –í–≤–µ–¥–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–µ—Ö–æ–≤ –≤ –æ–±–∞ –∫–∞—Ä–º–∞–Ω–∞.';
                attempts--;
                document.getElementById('attempts').textContent = attempts;
                return;
            }

            const totalNuts = rightAnswer + leftAnswer;

            if (rightAnswer === correctRight && leftAnswer === correctLeft) {
                // –ü–û–ë–ï–î–ê!
                document.getElementById('rightSquirrel').classList.add('correct');
                document.getElementById('leftSquirrel').classList.add('correct');

                resultDiv.className = 'result success';
                let rank = '';
                if (points === 100) rank = '–ú–ê–¢–ï–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ì–ï–ù–ò–ô';
                else if (points >= 70) rank = '–£–ú–ù–´–ô –†–ï–®–ê–¢–ï–õ–¨';
                else rank = '–ù–ê–ß–ò–ù–ê–Æ–©–ò–ô –ú–ê–¢–ï–ú–ê–¢–ò–ö';

                resultDiv.innerHTML = `
                    <div class="celebration">üéâüêøÔ∏èüéâ</div>
                    <h2 style="text-align:center;">–ü–†–ê–í–ò–õ–¨–ù–û!</h2>
                    <p><strong>–¢—ã –Ω–∞—à—ë–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç!</strong></p>
                    <div class="explanation">
                        <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong></p>
                        <p>–ü—É—Å—Ç—å –≤ –ø—Ä–∞–≤–æ–º –∫–∞—Ä–º–∞–Ω–µ x –æ—Ä–µ—Ö–æ–≤.</p>
                        <p>–¢–æ–≥–¥–∞ –≤ –ª–µ–≤–æ–º: 3x –æ—Ä–µ—Ö–æ–≤.</p>
                        <p>–í—Å–µ–≥–æ: x + 3x = 28</p>
                        <p>4x = 28</p>
                        <p>x = 7 –æ—Ä–µ—Ö–æ–≤ (–ø—Ä–∞–≤—ã–π –∫–∞—Ä–º–∞–Ω)</p>
                        <p>3 √ó 7 = 21 –æ—Ä–µ—Ö (–ª–µ–≤—ã–π –∫–∞—Ä–º–∞–Ω)</p>
                        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞: 7 + 21 = 28 ‚úì</p>
                        <p>21 √∑ 7 = 3 (–≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ) ‚úì</p>
                    </div>
                    <p style="text-align:center;">
                        <strong>–¢–≤–æ—è –Ω–∞–≥—Ä–∞–¥–∞:</strong><br>
                        üå∞ ${points} –æ—Ä–µ—Ö–æ–≤—ã—Ö –æ—á–∫–æ–≤<br>
                        üèÜ –†–∞–Ω–≥: ${rank}
                    </p>
                `;

                document.getElementById('submitBtn').disabled = true;
                document.getElementById('hintBtn').disabled = true;
                document.getElementById('resetBtn').style.display = 'block';
                document.getElementById('rightInput').disabled = true;
                document.getElementById('leftInput').disabled = true;

            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                points -= 15;
                document.getElementById('points').textContent = Math.max(0, points);

                resultDiv.className = 'result error';

                let message = `<p><strong>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!</strong></p>`;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –æ—à–∏–±–∫–∏
                if (totalNuts !== 28) {
                    message += `<p>–°—É–º–º–∞ –æ—Ä–µ—Ö–æ–≤: ${rightAnswer} + ${leftAnswer} = <strong>${totalNuts}</strong></p>`;
                    message += `<p>–ê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: <strong>28</strong> –æ—Ä–µ—Ö–æ–≤.</p>`;
                } else if (leftAnswer !== rightAnswer * 3) {
                    message += `<p>–°—É–º–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (28), –Ω–æ –≤ –ª–µ–≤–æ–º –∫–∞—Ä–º–∞–Ω–µ –Ω–µ –≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ!</p>`;
                    message += `<p>${leftAnswer} √∑ ${rightAnswer} = ${(leftAnswer / rightAnswer).toFixed(2)}</p>`;
                    message += `<p>–ê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: —Ä–æ–≤–Ω–æ <strong>3</strong></p>`;
                } else {
                    message += `<p>–ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ä–µ—Ö–æ–≤.</p>`;
                }

                message += `<p style="margin-top:15px;">üí° –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!</p>`;

                resultDiv.innerHTML = message;
            }
        }

        function showHint() {
            if (hintShown) return;

            hintShown = true;
            points -= 20;
            document.getElementById('points').textContent = Math.max(0, points);

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result hint';
            resultDiv.innerHTML = `
                <p><strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong></p>
                <div class="explanation">
                    <p><strong>–ö–∞–∫ —Ä–µ—à–∞—Ç—å:</strong></p>
                    <ol>
                        <li>–ü—É—Å—Ç—å –≤ –ø—Ä–∞–≤–æ–º –∫–∞—Ä–º–∞–Ω–µ <strong>x</strong> –æ—Ä–µ—Ö–æ–≤</li>
                        <li>–¢–æ–≥–¥–∞ –≤ –ª–µ–≤–æ–º <strong>3x</strong> –æ—Ä–µ—Ö–æ–≤ (–≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ)</li>
                        <li>–í—Å–µ–≥–æ –æ—Ä–µ—Ö–æ–≤: x + 3x = 28</li>
                        <li>–£–ø—Ä–æ—Å—Ç–∏: 4x = 28</li>
                        <li>–ù–∞–π–¥–∏ x: x = 28 √∑ 4</li>
                        <li>–ü—Ä–∞–≤—ã–π –∫–∞—Ä–º–∞–Ω = x</li>
                        <li>–õ–µ–≤—ã–π –∫–∞—Ä–º–∞–Ω = 3x</li>
                    </ol>
                </div>
                <p><em>‚ö†Ô∏è –ó–∞ –ø–æ–¥—Å–∫–∞–∑–∫—É —Å–Ω—è—Ç–æ 20 –æ—á–∫–æ–≤</em></p>
            `;

            document.getElementById('hintBtn').disabled = true;
            document.getElementById('hintBtn').textContent = '‚úì –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞';
        }

        function resetGame() {
            attempts = 0;
            points = 100;
            hintShown = false;

            document.getElementById('attempts').textContent = attempts;
            document.getElementById('points').textContent = points;
            document.getElementById('result').style.display = 'none';

            document.getElementById('rightSquirrel').classList.remove('correct');
            document.getElementById('leftSquirrel').classList.remove('correct');

            document.getElementById('submitBtn').disabled = false;
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('hintBtn').textContent = 'üí° –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É';
            document.getElementById('resetBtn').style.display = 'none';

            document.getElementById('rightInput').disabled = false;
            document.getElementById('leftInput').disabled = false;
            document.getElementById('rightInput').value = '';
            document.getElementById('leftInput').value = '';

            document.getElementById('rightNuts').textContent = '';
            document.getElementById('leftNuts').textContent = '';

            document.getElementById('rightInput').focus();
        }

        // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        document.getElementById('leftInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('submitBtn').disabled) {
                checkAnswer();
            }
        });

        document.getElementById('rightInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('leftInput').focus();
            }
        });

        // –§–æ–∫—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            document.getElementById('rightInput').focus();
        };
    </script>
</body>
</html>