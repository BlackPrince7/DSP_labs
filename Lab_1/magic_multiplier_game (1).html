<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîÆ –ö–≤–µ—Å—Ç: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
        }

        .story {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .input-group {
            margin: 30px 0;
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #667eea;
            border-radius: 10px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .hint {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .chest {
            text-align: center;
            font-size: 80px;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .celebration {
            text-align: center;
            font-size: 50px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÆ –ö–≤–µ—Å—Ç: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å üîÆ</h1>

        <div class="story">
            <p><strong>–õ–µ–≥–µ–Ω–¥–∞:</strong> –î—Ä–µ–≤–Ω–∏–π –≤–æ–ª—à–µ–±–Ω–∏–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–ª –∫–æ–¥ –æ—Ç —Å–≤–æ–µ–≥–æ —Å—É–Ω–¥–∞–∫–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏!</p>
            <p>–ö–æ–¥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–∏—Å–ª–∞ <strong>z</strong>, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å—É–º–º–∞ <strong>5z</strong> –∏ <strong>15z</strong> —Ä–∞–≤–Ω–∞ <strong>840 –º–∞–≥–∏—á–µ—Å–∫–∏–º –∫—Ä–∏—Å—Ç–∞–ª–ª–∞–º</strong>.</p>
            <p>–£ —Ç–µ–±—è –µ—Å—Ç—å <strong>3 –ø–æ–ø—ã—Ç–∫–∏</strong>, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ z!</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="attempts">0</div>
                <div class="stat-label">–ü–æ–ø—ã—Ç–æ–∫</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="points">100</div>
                <div class="stat-label">–û—á–∫–æ–≤</div>
            </div>
        </div>

        <div class="input-group">
            <input type="number" id="answerInput" placeholder="–í–≤–µ–¥–∏ –∑–Ω–∞—á–µ–Ω–∏–µ z...">
            <button onclick="checkAnswer()" id="submitBtn">üéØ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
            <button onclick="resetGame()" id="resetBtn" style="display:none; background:#6c757d;">üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>

        <div id="result" class="result"></div>
    </div>

    <script>
        const correctAnswer = 42;
        let attempts = 0;
        let points = 100;
        const maxAttempts = 3;

        function checkAnswer() {
            attempts++;
            document.getElementById('attempts').textContent = attempts;

            const userAnswer = parseInt(document.getElementById('answerInput').value);
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';

            if (isNaN(userAnswer)) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = '‚ö†Ô∏è <strong>–û—à–∏–±–∫–∞!</strong> –í–≤–µ–¥–∏ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.';
                attempts--;
                document.getElementById('attempts').textContent = attempts;
                return;
            }

            if (userAnswer === correctAnswer) {
                // –ü–û–ë–ï–î–ê!
                resultDiv.className = 'result success';
                let rank = '';
                if (points === 100) rank = '–õ–ï–ì–ï–ù–î–ê–†–ù–´–ô –í–û–õ–®–ï–ë–ù–ò–ö';
                else if (points >= 70) rank = '–û–ü–´–¢–ù–´–ô –ú–ê–ì';
                else rank = '–ù–ê–ß–ò–ù–ê–Æ–©–ò–ô –ß–ê–†–û–î–ï–ô';

                resultDiv.innerHTML = `
                    <div class="celebration">‚ú®üéâ‚ú®</div>
                    <h2 style="text-align:center;">–ü–û–ó–î–†–ê–í–õ–Ø–Æ!</h2>
                    <p><strong>–¢—ã –Ω–∞—à—ë–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: z = ${correctAnswer}</strong></p>
                    <p>–ü—Ä–æ–≤–µ—Ä–∫–∞: 5 √ó ${correctAnswer} + 15 √ó ${correctAnswer} = ${5*correctAnswer + 15*correctAnswer}</p>
                    <div class="chest">üéÅ</div>
                    <p style="text-align:center;">
                        <strong>–¢–≤–æ—è –Ω–∞–≥—Ä–∞–¥–∞:</strong><br>
                        üíé ${points} –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –æ—á–∫–æ–≤<br>
                        üèÜ –†–∞–Ω–≥: ${rank}
                    </p>
                `;

                document.getElementById('submitBtn').disabled = true;
                document.getElementById('resetBtn').style.display = 'block';
                document.getElementById('answerInput').disabled = true;

            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                points -= 15;
                document.getElementById('points').textContent = Math.max(0, points);

                const result = 5 * userAnswer + 15 * userAnswer;

                let message = `
                    <p><strong>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!</strong></p>
                    <p>–ü—Ä–∏ z = ${userAnswer} –ø–æ–ª—É—á–∞–µ—Ç—Å—è:</p>
                    <p>5 √ó ${userAnswer} + 15 √ó ${userAnswer} = <strong>${result}</strong></p>
                    <p>–ê –Ω—É–∂–Ω–æ: <strong>840</strong></p>
                `;

                // –ü–æ–¥—Å–∫–∞–∑–∫–∏
                if (attempts === 1) {
                    resultDiv.className = 'result hint';
                    message += `
                        <hr>
                        <p><strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1:</strong></p>
                        <p>–ü–æ–ø—Ä–æ–±—É–π —Å–ª–æ–∂–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø—Ä–∏ z!</p>
                        <p>5z + 15z = (5 + 15)z = <strong>20z</strong></p>
                        <p>–¢–µ–ø–µ—Ä—å —Ä–µ—à–∏: <strong>20z = 840</strong></p>
                    `;
                } else if (attempts === 2) {
                    resultDiv.className = 'result hint';
                    message += `
                        <hr>
                        <p><strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2:</strong></p>
                        <p><strong>20z = 840</strong></p>
                        <p>–†–∞–∑–¥–µ–ª–∏ –æ–±–µ —á–∞—Å—Ç–∏ –Ω–∞ 20:</p>
                        <p>z = 840 √∑ 20</p>
                        <p><strong>‚ö†Ô∏è –≠—Ç–æ —Ç–≤–æ—è –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞!</strong></p>
                    `;
                } else {
                    resultDiv.className = 'result error';
                }

                resultDiv.innerHTML = message;

                // –ï—Å–ª–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –ø–æ–ø—ã—Ç–∫–∏
                if (attempts >= maxAttempts) {
                    resultDiv.className = 'result error';
                    resultDiv.innerHTML = `
                        <h2 style="text-align:center;">üíÄ –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê üíÄ</h2>
                        <p><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –±—ã–ª: z = ${correctAnswer}</strong></p>
                        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞: 5 √ó ${correctAnswer} + 15 √ó ${correctAnswer} = ${5*correctAnswer + 15*correctAnswer}</p>
                        <hr>
                        <p style="text-align:center;">
                            üîÆ <em>–í–æ–ª—à–µ–±–Ω–∏–∫ –≥–æ–≤–æ—Ä–∏—Ç:<br>
                            "–ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Å—è! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏ —Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–∞–≤–∏—à—å—Å—è!"</em>
                        </p>
                    `;

                    document.getElementById('submitBtn').disabled = true;
                    document.getElementById('resetBtn').style.display = 'block';
                    document.getElementById('answerInput').disabled = true;
                }
            }

            document.getElementById('answerInput').value = '';
        }

        function resetGame() {
            attempts = 0;
            points = 100;
            document.getElementById('attempts').textContent = attempts;
            document.getElementById('points').textContent = points;
            document.getElementById('result').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('answerInput').disabled = false;
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
        }

        // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('submitBtn').disabled) {
                checkAnswer();
            }
        });

        // –§–æ–∫—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            document.getElementById('answerInput').focus();
        };
    </script>
</body>
</html>